(function(){"use strict";var e={4467:function(e,t,s){var n=s(5130),i=s(6768),o=s(4232);const a={class:"top-nav"},r={class:"nav-menu"};function l(e,t,s,n,l,c){const d=(0,i.g2)("router-link"),u=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",{id:"app",class:(0,o.C4)({dark:l.isDark})},[(0,i.Lk)("nav",a,[t[12]||(t[12]=(0,i.Lk)("div",{class:"nav-left"},[(0,i.Lk)("span",{class:"nav-title-blue"},"FinCompass"),(0,i.Lk)("span",{class:"nav-title-red"},"PLUGIN")],-1)),(0,i.Lk)("div",r,[(0,i.bF)(d,{to:"/dashboard"},{default:(0,i.k6)(()=>t[0]||(t[0]=[(0,i.eW)("Dashboard")])),_:1,__:[0]}),(0,i.bF)(d,{to:"/servers"},{default:(0,i.k6)(()=>t[1]||(t[1]=[(0,i.eW)("Servers")])),_:1,__:[1]}),(0,i.bF)(d,{to:"/intentions"},{default:(0,i.k6)(()=>t[2]||(t[2]=[(0,i.eW)("1. Intentions")])),_:1,__:[2]}),t[8]||(t[8]=(0,i.Lk)("span",{class:"arrow"},"â†’",-1)),(0,i.bF)(d,{to:"/cases"},{default:(0,i.k6)(()=>t[3]||(t[3]=[(0,i.eW)("2. Cases")])),_:1,__:[3]}),t[9]||(t[9]=(0,i.Lk)("span",{class:"arrow"},"â†’",-1)),(0,i.bF)(d,{to:"/providers"},{default:(0,i.k6)(()=>t[4]||(t[4]=[(0,i.eW)("3. Providers")])),_:1,__:[4]}),t[10]||(t[10]=(0,i.Lk)("span",{class:"arrow"},"â†’",-1)),(0,i.bF)(d,{to:"/catalogs"},{default:(0,i.k6)(()=>t[5]||(t[5]=[(0,i.eW)("4. Catalogs")])),_:1,__:[5]}),t[11]||(t[11]=(0,i.Lk)("span",{class:"arrow"},"â†’",-1)),(0,i.bF)(d,{to:"/start"},{default:(0,i.k6)(()=>t[6]||(t[6]=[(0,i.eW)("5. Start Magic")])),_:1,__:[6]}),(0,i.bF)(d,{to:"/pl"},{default:(0,i.k6)(()=>t[7]||(t[7]=[(0,i.eW)("P&L")])),_:1,__:[7]})]),t[13]||(t[13]=(0,i.Lk)("div",{class:"nav-right"},[(0,i.Lk)("span",{class:"icon help"},"?"),(0,i.Lk)("span",{class:"icon sun"},"ðŸŒŸ"),(0,i.Lk)("span",{class:"user-circle"},"me")],-1))]),(0,i.Lk)("main",null,[(0,i.bF)(u,{onGotoServers:c.goToServers},null,8,["onGotoServers"])])],2)}s(4114);var c={name:"App",data(){return{isDark:!0}},methods:{goToServers(){this.$router.push("/servers")}}},d=s(1241);const u=(0,d.A)(c,[["render",l],["__scopeId","data-v-31283a86"]]);var h=u,v=s(1387);const p={class:"dashboard-view"},m={key:0,class:"loading"},k={key:1},f={key:0},g={class:"warning"},y={key:1};function C(e,t,s,o,a,r){return(0,i.uX)(),(0,i.CE)("div",p,[a.loading?((0,i.uX)(),(0,i.CE)("div",m,"Loading...")):((0,i.uX)(),(0,i.CE)("div",k,[r.hasValidServer?((0,i.uX)(),(0,i.CE)("div",y,t[3]||(t[3]=[(0,i.Lk)("h2",null,"Dashboard",-1),(0,i.Lk)("p",null,"Welcome to the FinCompass dashboard!",-1)]))):((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("div",g,[t[1]||(t[1]=(0,i.Lk)("h3",null,"Setup Required",-1)),t[2]||(t[2]=(0,i.Lk)("p",null,"You must configure at least one server with an API key before using the dashboard.",-1)),(0,i.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,n.D$)(t=>e.$emit("gotoServers"),["prevent"]))},"Go to Servers")])]))]))])}s(8111),s(3579);const L="/fincompassplugin/api";var w={name:"FinCompassDashboard",data(){return{servers:[],loading:!0}},computed:{hasValidServer(){return this.servers.some(e=>e.api_key&&""!==e.api_key.trim())}},methods:{async fetchServers(){this.loading=!0;try{const e=await fetch(`${L}/servers`);if(e.ok){const t=await e.json();this.servers=t.servers||[]}else this.servers=[]}catch(e){this.servers=[]}this.loading=!1}},mounted(){this.fetchServers()}};const b=(0,d.A)(w,[["render",C],["__scopeId","data-v-10bb24f3"]]);var S=b;const _={class:"servers-view"},E={key:0,class:"loading"},X={key:1},F={key:0},P={key:1,class:"server-list"},I={style:{display:"flex","align-items":"center",flex:"1","min-width":"0"}},U={class:"server-name"},$={key:0,class:"server-desc"},A={class:"server-actions"},T=["onClick"],j=["onClick"],D=["onClick"],M={key:0,class:"edit-form"},O=["onClick"];function W(e,t,s,a,r,l){return(0,i.uX)(),(0,i.CE)("div",_,[t[8]||(t[8]=(0,i.Lk)("h2",null,"Servers",-1)),(0,i.Lk)("form",{class:"add-server-form",onSubmit:t[3]||(t[3]=(0,n.D$)((...e)=>l.addServer&&l.addServer(...e),["prevent"]))},[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.newServerUrl=e),placeholder:"Server URL (e.g. https://fincompass.emolio.nl)",required:""},null,512),[[n.Jo,r.newServerUrl]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.newServerDescription=e),placeholder:"Description (optional)"},null,512),[[n.Jo,r.newServerDescription]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.newServerApiKey=e),placeholder:"API Key (optional)"},null,512),[[n.Jo,r.newServerApiKey]]),t[7]||(t[7]=(0,i.Lk)("button",{type:"submit"},"Add Server",-1))],32),r.loading?((0,i.uX)(),(0,i.CE)("div",E,"Loading...")):((0,i.uX)(),(0,i.CE)("div",X,[r.servers.length?((0,i.uX)(),(0,i.CE)("ul",P,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.servers,e=>((0,i.uX)(),(0,i.CE)("li",{key:e.url,class:(0,o.C4)(["server-item",{selected:e.selected}])},[(0,i.Lk)("div",I,[(0,i.Lk)("span",U,(0,o.v_)(e.url),1),e.description?((0,i.uX)(),(0,i.CE)("span",$,"- "+(0,o.v_)(e.description),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",A,[(0,i.Lk)("button",{onClick:t=>l.toggleServer(e),class:(0,o.C4)({"selected-btn":e.selected})},(0,o.v_)(e.selected?"Selected (click to deselect)":"Select"),11,T),(0,i.Lk)("button",{onClick:t=>l.editServer(e),class:"edit-btn"},"Edit",8,j),(0,i.Lk)("button",{onClick:t=>l.deleteServer(e),class:"danger"},"Delete",8,D)]),r.editingUrl===e.url?((0,i.uX)(),(0,i.CE)("div",M,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.editDescription=e),placeholder:"Description"},null,512),[[n.Jo,r.editDescription]]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.editApiKey=e),placeholder:"API Key"},null,512),[[n.Jo,r.editApiKey]]),(0,i.Lk)("button",{onClick:t=>l.saveEdit(e)},"Save",8,O),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.cancelEdit&&l.cancelEdit(...e))},"Cancel")])):(0,i.Q3)("",!0)],2))),128))])):((0,i.uX)(),(0,i.CE)("div",F,"No servers found."))]))])}var V={name:"FinCompassServers",data(){return{servers:[],loading:!0,newServerUrl:"",newServerDescription:"",newServerApiKey:"",editingUrl:null,editDescription:"",editApiKey:""}},methods:{async fetchServers(){this.loading=!0;try{const e=await fetch(`${L}/servers`);if(e.ok){const t=await e.json();this.servers=t.servers||[]}else this.servers=[]}catch(e){this.servers=[]}this.loading=!1},async addServer(){if(!this.newServerUrl)return;const e={url:this.newServerUrl,description:this.newServerDescription,api_key:this.newServerApiKey},t=await fetch(`${L}/servers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});t.ok&&(this.newServerUrl="",this.newServerDescription="",this.newServerApiKey="",await this.fetchServers())},editServer(e){this.editingUrl=e.url,this.editDescription=e.description||"",this.editApiKey=e.api_key||""},cancelEdit(){this.editingUrl=null,this.editDescription="",this.editApiKey=""},async saveEdit(e){e.description!==this.editDescription&&await fetch(`${L}/servers/${encodeURIComponent(e.url)}/description`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:this.editDescription})}),e.api_key!==this.editApiKey&&await fetch(`${L}/servers/${encodeURIComponent(e.url)}/api_key`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({api_key:this.editApiKey})}),this.cancelEdit(),await this.fetchServers()},async deleteServer(e){confirm("Delete this server?")&&(await fetch(`${L}/servers/${encodeURIComponent(e.url)}`,{method:"DELETE"}),await this.fetchServers())},async toggleServer(e){e.selected?await fetch(`${L}/servers/deselect`,{method:"POST"}):await fetch(`${L}/servers/${encodeURIComponent(e.url)}/select`,{method:"POST"}),await this.fetchServers()}},mounted(){this.fetchServers()}};const K=(0,d.A)(V,[["render",W],["__scopeId","data-v-789da72e"]]);var x=K;const N={class:"providers-view"},J={key:0,class:"loading"},Q={key:1},G={class:"error-message"},R={key:0,href:"#/servers",class:"action-link"},H={key:2},q={key:0,class:"no-providers"},B={key:1},Y={class:"providers-list"},z={class:"provider-name"},Z=["onClick"];function ee(e,t,s,n,a,r){return(0,i.uX)(),(0,i.CE)("div",N,[t[0]||(t[0]=(0,i.Lk)("h2",null,"Available Providers",-1)),a.loading?((0,i.uX)(),(0,i.CE)("div",J,"Loading providers...")):a.error?((0,i.uX)(),(0,i.CE)("div",Q,[(0,i.Lk)("div",G,[(0,i.eW)((0,o.v_)(a.error)+" ",1),a.error&&a.error.toLowerCase().includes("no server selected")?((0,i.uX)(),(0,i.CE)("a",R,"Action: Select Server")):(0,i.Q3)("",!0)])])):((0,i.uX)(),(0,i.CE)("div",H,[a.providers.length?((0,i.uX)(),(0,i.CE)("div",B,[(0,i.Lk)("ul",Y,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.providers,e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id,class:(0,o.C4)(["provider-item",{selected:e.selected}])},[(0,i.Lk)("span",z,(0,o.v_)(e.name||e.id),1),(0,i.Lk)("button",{onClick:t=>r.toggleProvider(e),class:(0,o.C4)({"selected-btn":e.selected})},(0,o.v_)(e.selected?"Selected (click to deselect)":"Select"),11,Z)],2))),128))])])):((0,i.uX)(),(0,i.CE)("div",q,"No providers found for the selected server."))]))])}var te={name:"FinCompassProviders",data(){return{providers:[],loading:!0,error:""}},methods:{async fetchProviders(){this.loading=!0,this.error="";try{const e=await fetch(`${L}/providers`),t=await e.json();e.ok&&"success"===t.status?this.providers=Array.isArray(t.providers)?t.providers:t.providers.results||[]:this.error=t.error||"Failed to load providers."}catch(e){this.error="Network error or could not fetch providers."}this.loading=!1},async toggleProvider(e){this.error="";try{if(e.selected){const t=await fetch(`${L}/providers/${e.id}/deselect`,{method:"POST"}),s=await t.json();if(!t.ok||"success"!==s.status)throw new Error(s.error||"Failed to deselect provider.")}else{const t=await fetch(`${L}/providers/${e.id}/select`,{method:"POST"}),s=await t.json();if(!t.ok||"success"!==s.status)throw new Error(s.error||"Failed to select provider.")}await this.fetchProviders()}catch(t){this.error=t.message}}},mounted(){this.fetchProviders()}};const se=(0,d.A)(te,[["render",ee],["__scopeId","data-v-4231baac"]]);var ne=se;const ie={class:"pl-view"},oe={class:"external-link-container"},ae=["href"];function re(e,t,s,n,o,a){return(0,i.uX)(),(0,i.CE)("div",ie,[t[1]||(t[1]=(0,i.Lk)("h2",null,"P&L",-1)),(0,i.Lk)("div",oe,[t[0]||(t[0]=(0,i.Lk)("p",null,"For detailed Profit & Loss analysis, please visit our main platform.",-1)),(0,i.Lk)("a",{href:o.externalUrl,target:"_blank",rel:"noopener",class:"external-link-button"}," Go to External P&L ",8,ae)])])}var le={name:"FinCompassPL",data(){return{externalUrl:"https://fincompass.emolio.nl/app/#/pnl"}}};const ce=(0,d.A)(le,[["render",re],["__scopeId","data-v-54a9b2a4"]]);var de=ce;const ue={class:"intentions-view"},he={class:"toolbar"},ve={key:0,class:"loading"},pe={key:1,class:"error"},me={key:2,class:"intentions-list"},ke={class:"view-mode"},fe={class:"intention-details"},ge={key:0},ye={class:"intention-actions"},Ce=["onClick"],Le=["onClick"],we=["onClick"],be={key:3,class:"modal-overlay"},Se={class:"modal-content"},_e={class:"form-group"},Ee={class:"form-group"},Xe={class:"form-group checkbox-group"},Fe={class:"form-group"},Pe={class:"form-group"},Ie={class:"hold-period-inputs"},Ue={class:"modal-actions"},$e={type:"submit"};function Ae(e,t,s,a,r,l){return(0,i.uX)(),(0,i.CE)("div",ue,[t[17]||(t[17]=(0,i.Lk)("h2",null,"Manage Intentions",-1)),(0,i.Lk)("div",he,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.openCreateModal&&l.openCreateModal(...e))},"Add New Intention")]),r.loading?((0,i.uX)(),(0,i.CE)("div",ve,"Loading...")):r.error?((0,i.uX)(),(0,i.CE)("div",pe,(0,o.v_)(r.error),1)):((0,i.uX)(),(0,i.CE)("ul",me,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.intentions,e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id,class:"intention-item"},[(0,i.Lk)("div",ke,[(0,i.Lk)("div",fe,[(0,i.Lk)("strong",null,(0,o.v_)(e.intention),1),e.description?((0,i.uX)(),(0,i.CE)("p",ge,(0,o.v_)(e.description),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",ye,[(0,i.Lk)("button",{onClick:t=>l.selectIntention(e),class:(0,o.C4)({"selected-btn":e.selected})},(0,o.v_)(e.selected?"Selected":"Select"),11,Ce),(0,i.Lk)("button",{onClick:t=>l.openEditModal(e)},"Edit",8,Le),(0,i.Lk)("button",{onClick:t=>l.deleteIntention(e.id),class:"danger"},"Delete",8,we)])])]))),128))])),r.showModal?((0,i.uX)(),(0,i.CE)("div",be,[(0,i.Lk)("div",Se,[(0,i.Lk)("h3",null,(0,o.v_)(r.modalForm.isEdit?"Edit Intention":"Create New Intention"),1),(0,i.Lk)("form",{onSubmit:t[8]||(t[8]=(0,n.D$)((...e)=>l.handleModalSubmit&&l.handleModalSubmit(...e),["prevent"]))},[(0,i.Lk)("div",_e,[t[9]||(t[9]=(0,i.Lk)("label",{for:"intention"},"Intention",-1)),(0,i.bo)((0,i.Lk)("input",{id:"intention","onUpdate:modelValue":t[1]||(t[1]=e=>r.modalForm.intention=e),placeholder:"e.g., 'Financial Growth'",required:""},null,512),[[n.Jo,r.modalForm.intention]])]),(0,i.Lk)("div",Ee,[t[10]||(t[10]=(0,i.Lk)("label",{for:"description"},"Description",-1)),(0,i.bo)((0,i.Lk)("input",{id:"description","onUpdate:modelValue":t[2]||(t[2]=e=>r.modalForm.description=e),placeholder:"Optional details"},null,512),[[n.Jo,r.modalForm.description]])]),(0,i.Lk)("div",Xe,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"selected","onUpdate:modelValue":t[3]||(t[3]=e=>r.modalForm.selected=e)},null,512),[[n.lH,r.modalForm.selected]]),t[11]||(t[11]=(0,i.Lk)("label",{for:"selected"},"Set as selected",-1))]),(0,i.Lk)("div",Fe,[t[12]||(t[12]=(0,i.Lk)("label",{for:"amount"},"Amount to Invest",-1)),(0,i.bo)((0,i.Lk)("input",{type:"number",min:"0",step:"any",id:"amount","onUpdate:modelValue":t[4]||(t[4]=e=>r.modalForm.amount=e),placeholder:"e.g. 1000"},null,512),[[n.Jo,r.modalForm.amount,void 0,{number:!0}]]),t[13]||(t[13]=(0,i.Lk)("small",null,"Default amount to invest for this intention (can be overridden per schedule).",-1))]),(0,i.Lk)("div",Pe,[t[15]||(t[15]=(0,i.Lk)("label",{for:"holdMinutes"},"Hold Period",-1)),(0,i.Lk)("div",Ie,[(0,i.bo)((0,i.Lk)("input",{type:"number",min:"0","onUpdate:modelValue":t[5]||(t[5]=e=>r.holdValue=e),id:"holdMinutes",style:{width:"80px"}},null,512),[[n.Jo,r.holdValue,void 0,{number:!0}]]),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.holdUnit=e)},t[14]||(t[14]=[(0,i.Lk)("option",{value:"minutes"},"Minutes",-1),(0,i.Lk)("option",{value:"hours"},"Hours",-1),(0,i.Lk)("option",{value:"days"},"Days",-1)]),512),[[n.u1,r.holdUnit]])]),t[16]||(t[16]=(0,i.Lk)("small",null,"How long to hold before selling (used as default for schedules).",-1))]),(0,i.Lk)("div",Ue,[(0,i.Lk)("button",$e,(0,o.v_)(r.modalForm.isEdit?"Save Changes":"Create"),1),(0,i.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>l.closeModal&&l.closeModal(...e))},"Cancel")])],32)])])):(0,i.Q3)("",!0)])}s(116),s(1701);var Te={name:"FinCompassIntentions",data(){return{intentions:[],loading:!0,error:"",showModal:!1,modalForm:{isEdit:!1,data:{id:null,intention:"",description:"",selected:!1,buy_datetime:"",sell_datetime:"",hold_minutes:0}},holdValue:0,holdUnit:"minutes"}},watch:{modalForm:{handler(e){e&&"number"===typeof e.hold_minutes?e.hold_minutes%1440===0?(this.holdValue=e.hold_minutes/1440,this.holdUnit="days"):e.hold_minutes%60===0?(this.holdValue=e.hold_minutes/60,this.holdUnit="hours"):(this.holdValue=e.hold_minutes,this.holdUnit="minutes"):(this.holdValue=0,this.holdUnit="minutes")},immediate:!0,deep:!0}},methods:{async fetchIntentions(){this.loading=!0;try{const e=await fetch(`${L}/intentions`);if(!e.ok)throw new Error("Failed to fetch intentions");this.intentions=await e.json()}catch(e){this.error=e.message}finally{this.loading=!1}},openCreateModal(){this.modalForm={id:null,intention:"",description:"",selected:!1,hold_minutes:0,amount:0},this.showModal=!0},openEditModal(e){this.modalForm={id:e.id,intention:e.intention,description:e.description,selected:e.selected,hold_minutes:e.hold_minutes||0,amount:e.amount||0},this.showModal=!0},closeModal(){this.showModal=!1},async handleModalSubmit(){this.modalForm.isEdit?await this.saveEdit():await this.createIntention()},async createIntention(){await this.saveIntention()},async saveEdit(){if(this.modalForm.data.selected){const e=this.intentions.find(e=>e.selected&&e.id!==this.modalForm.data.id);e&&await fetch(`${L}/intentions/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,selected:!1})})}await this.saveIntention()},async deleteIntention(e){confirm("Are you sure you want to delete this intention?")&&(await fetch(`${L}/intentions/${e}`,{method:"DELETE"}),await this.fetchIntentions())},async selectIntention(e){const t=this.intentions.map(t=>{const s=t.id===e.id;return t.selected!==s?fetch(`${L}/intentions/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,selected:s})}):Promise.resolve()});await Promise.all(t),await this.fetchIntentions()},async saveIntention(){this.error="";try{let e=0;e="days"===this.holdUnit?24*this.holdValue*60:"hours"===this.holdUnit?60*this.holdValue:this.holdValue;const t={intention:this.modalForm.intention,description:this.modalForm.description,selected:this.modalForm.selected,hold_minutes:e,amount:this.modalForm.amount};let s;s=this.modalForm.id?await fetch(`${L}/intentions/${this.modalForm.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):await fetch(`${L}/intentions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});const n=await s.json();if(!s.ok)throw new Error(n.error||"Failed to save intention.");this.showModal=!1,await this.fetchIntentions()}catch(e){this.error=e.message}}},mounted(){this.fetchIntentions()}};const je=(0,d.A)(Te,[["render",Ae],["__scopeId","data-v-3e501dfe"]]);var De=je;const Me={class:"catalogs-view"},Oe={key:0,class:"loading"},We={key:1,class:"error-message"},Ve={key:2},Ke={key:0,class:"no-catalogs"},xe={key:1,class:"catalogs-list"},Ne={class:"catalog-name"},Je=["onClick"];function Qe(e,t,s,n,a,r){return(0,i.uX)(),(0,i.CE)("div",Me,[t[0]||(t[0]=(0,i.Lk)("h2",null,"Analysis Catalogs",-1)),t[1]||(t[1]=(0,i.Lk)("p",{class:"subtitle"},"Select the catalog to use for analysis.",-1)),a.loading?((0,i.uX)(),(0,i.CE)("div",Oe,"Loading catalogs...")):a.error?((0,i.uX)(),(0,i.CE)("div",We,(0,o.v_)(a.error),1)):((0,i.uX)(),(0,i.CE)("div",Ve,[a.catalogs.length?((0,i.uX)(),(0,i.CE)("ul",xe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.catalogs,e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id,class:(0,o.C4)(["catalog-item",{selected:e.selected}])},[(0,i.Lk)("span",Ne,(0,o.v_)(e.name),1),(0,i.Lk)("button",{onClick:t=>r.toggleCatalog(e),class:(0,o.C4)({"selected-btn":e.selected})},(0,o.v_)(e.selected?"Selected (click to deselect)":"Select"),11,Je)],2))),128))])):((0,i.uX)(),(0,i.CE)("div",Ke," No catalogs found. Ensure AetherOnePy core is running. "))]))])}var Ge={name:"FinCompassCatalogs",data(){return{catalogs:[],loading:!0,error:""}},methods:{async fetchCatalogs(){this.loading=!0,this.error="";try{const e=await fetch(`${L}/catalogs`),t=await e.json();e.ok&&"success"===t.status?this.catalogs=t.catalogs||[]:this.error=t.error||"Failed to load catalogs."}catch(e){this.error="Network error or could not fetch catalogs."}this.loading=!1},async toggleCatalog(e){this.error="";try{if(e.selected){const e=await fetch(`${L}/catalogs/deselect`,{method:"POST"}),t=await e.json();if(!e.ok||"success"!==t.status)throw new Error(t.error||"Failed to deselect.")}else{const t=await fetch(`${L}/catalogs/${e.id}/select`,{method:"POST"}),s=await t.json();if(!t.ok||"success"!==s.status)throw new Error(s.error||"Failed to select the catalog.")}await this.fetchCatalogs()}catch(t){this.error=t.message}}},mounted(){this.fetchCatalogs()}};const Re=(0,d.A)(Ge,[["render",Qe],["__scopeId","data-v-e47e4d7e"]]);var He=Re;const qe={class:"cases-view"},Be={key:0,class:"loading"},Ye={key:1,class:"error-message"},ze={key:2},Ze={key:0,class:"no-cases"},et={key:1,class:"cases-list"},tt={class:"case-name"},st=["onClick"];function nt(e,t,s,n,a,r){return(0,i.uX)(),(0,i.CE)("div",qe,[t[0]||(t[0]=(0,i.Lk)("h2",null,"Cases",-1)),t[1]||(t[1]=(0,i.Lk)("p",{class:"subtitle"},"Select the case to use for analysis.",-1)),a.loading?((0,i.uX)(),(0,i.CE)("div",Be,"Loading cases...")):a.error?((0,i.uX)(),(0,i.CE)("div",Ye,(0,o.v_)(a.error),1)):((0,i.uX)(),(0,i.CE)("div",ze,[a.cases.length?((0,i.uX)(),(0,i.CE)("ul",et,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.cases,e=>((0,i.uX)(),(0,i.CE)("li",{key:e.id,class:(0,o.C4)(["case-item",{selected:e.selected}])},[(0,i.Lk)("span",tt,(0,o.v_)(e.name),1),(0,i.Lk)("button",{onClick:t=>r.toggleCase(e),class:(0,o.C4)({"selected-btn":e.selected})},(0,o.v_)(e.selected?"Selected (click to deselect)":"Select"),11,st)],2))),128))])):((0,i.uX)(),(0,i.CE)("div",Ze," No cases found. Create a case first. "))]))])}var it={name:"FinCompassCases",data(){return{cases:[],loading:!0,error:""}},methods:{async fetchCases(){this.loading=!0,this.error="";try{const e=await fetch(`${L}/cases`),t=await e.json();e.ok&&"success"===t.status?this.cases=t.cases||[]:this.error=t.error||"Failed to load cases."}catch(e){this.error="Network error or could not fetch cases."}this.loading=!1},async toggleCase(e){this.error="";try{if(e.selected){const e=await fetch(`${L}/cases/deselect`,{method:"POST"}),t=await e.json();if(!e.ok||"success"!==t.status)throw new Error(t.error||"Failed to deselect.")}else{const t=await fetch(`${L}/cases/${e.id}/select`,{method:"POST"}),s=await t.json();if(!t.ok||"success"!==s.status)throw new Error(s.error||"Failed to select the case.")}await this.fetchCases()}catch(t){this.error=t.message}}},mounted(){this.fetchCases()}};const ot=(0,d.A)(it,[["render",nt],["__scopeId","data-v-0b505cab"]]);var at=ot;const rt={class:"start-magic-container"},lt={class:"summary-panel"},ct={key:0,class:"loading-selections"},dt={key:0,class:"summary-card intention-card"},ut={class:"summary-text"},ht={key:1,class:"summary-card"},vt={class:"summary-text"},pt={key:2,class:"summary-card"},mt={class:"summary-text"},kt={key:3,class:"summary-card"},ft={class:"summary-text"},gt={key:4,class:"missing-warning"},yt={key:5,class:"missing-warning"},Ct={key:6,class:"missing-warning"},Lt={key:7,class:"missing-warning"},wt={class:"action-panel"},bt=["disabled","title"],St={key:0,class:"loading"},_t={key:1,class:"result"},Et={key:0},Xt={key:1,class:"error"};function Ft(e,t,s,n,a,r){return(0,i.uX)(),(0,i.CE)("div",rt,[(0,i.Lk)("div",lt,[t[19]||(t[19]=(0,i.Lk)("h3",null,"âœ¨ Your Magical Plan âœ¨",-1)),a.fetchingSelections?((0,i.uX)(),(0,i.CE)("div",ct,t[1]||(t[1]=[(0,i.Lk)("span",{class:"spinner"},null,-1),(0,i.eW)(" Loading your selections... ")]))):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[a.selected.intention?((0,i.uX)(),(0,i.CE)("div",dt,[t[7]||(t[7]=(0,i.Lk)("span",{class:"icon"},"ðŸª„",-1)),(0,i.Lk)("span",ut,[t[5]||(t[5]=(0,i.eW)(" I want to ")),(0,i.Lk)("b",null,(0,o.v_)(a.selected.intention.intention),1),a.selected.intention.amount&&a.selected.intention.amount>0?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[t[2]||(t[2]=(0,i.eW)(" for ")),(0,i.Lk)("b",null,(0,o.v_)(a.selected.intention.amount),1),t[3]||(t[3]=(0,i.eW)(" USD "))],64)):(0,i.Q3)("",!0),a.selected.intention.hold_minutes&&a.selected.intention.hold_minutes>0?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[t[4]||(t[4]=(0,i.eW)(" , holding for ")),(0,i.Lk)("b",null,(0,o.v_)(r.holdPeriodString(a.selected.intention.hold_minutes)),1)],64)):(0,i.Q3)("",!0),t[6]||(t[6]=(0,i.eW)(". "))])])):(0,i.Q3)("",!0),a.selected.case?((0,i.uX)(),(0,i.CE)("div",ht,[t[9]||(t[9]=(0,i.Lk)("span",{class:"icon"},"ðŸ“",-1)),(0,i.Lk)("span",vt,[t[8]||(t[8]=(0,i.eW)("Case: ")),(0,i.Lk)("b",null,(0,o.v_)(a.selected.case.name),1)])])):(0,i.Q3)("",!0),a.selected.provider?((0,i.uX)(),(0,i.CE)("div",pt,[t[11]||(t[11]=(0,i.Lk)("span",{class:"icon"},"ðŸ”Œ",-1)),(0,i.Lk)("span",mt,[t[10]||(t[10]=(0,i.eW)("Provider: ")),(0,i.Lk)("b",null,(0,o.v_)(a.selected.provider.name),1)])])):(0,i.Q3)("",!0),a.selected.catalog?((0,i.uX)(),(0,i.CE)("div",kt,[t[13]||(t[13]=(0,i.Lk)("span",{class:"icon"},"ðŸ“š",-1)),(0,i.Lk)("span",ft,[t[12]||(t[12]=(0,i.eW)("Catalog: ")),(0,i.Lk)("b",null,(0,o.v_)(a.selected.catalog.name),1)])])):(0,i.Q3)("",!0),a.selected.intention?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",gt,t[14]||(t[14]=[(0,i.eW)(" âš ï¸ Please select an intention. "),(0,i.Lk)("a",{href:"#/intentions",class:"action-link"},"Take action: Select Intention",-1)]))),a.selected.case?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",yt,t[15]||(t[15]=[(0,i.eW)(" âš ï¸ Please select a case. "),(0,i.Lk)("a",{href:"#/cases",class:"action-link"},"Take action: Select Case",-1)]))),a.selected.provider?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ct,t[16]||(t[16]=[(0,i.eW)(" âš ï¸ Please select a provider. "),(0,i.Lk)("a",{href:"#/providers",class:"action-link"},"Take action: Select Provider",-1)]))),a.selected.catalog?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Lt,t[17]||(t[17]=[(0,i.eW)(" âš ï¸ Please select a catalog. "),(0,i.Lk)("a",{href:"#/catalogs",class:"action-link"},"Take action: Select Catalog",-1)]))),t[18]||(t[18]=(0,i.Lk)("div",{class:"magic-desc"},[(0,i.eW)("All your choices are aligned. When you press "),(0,i.Lk)("b",null,"Start Magic"),(0,i.eW)(", your intention will be set in motion with a sprinkle of algorithmic wizardry! âœ¨")],-1))],64))]),t[21]||(t[21]=(0,i.Lk)("div",{class:"arrow-panel"},[(0,i.Lk)("div",{class:"arrow"},"â†’")],-1)),(0,i.Lk)("div",wt,[(0,i.Lk)("button",{class:"start-magic-btn",disabled:a.loading||!r.canStartMagic||a.fetchingSelections,onClick:t[0]||(t[0]=(...e)=>r.runMagic&&r.runMagic(...e)),title:r.canStartMagic?"":r.missingSelectionsText}," Start Magic ",8,bt),a.loading?((0,i.uX)(),(0,i.CE)("div",St,"Running analysis and scheduling...")):(0,i.Q3)("",!0),a.result?((0,i.uX)(),(0,i.CE)("div",_t,["success"===a.result.status?((0,i.uX)(),(0,i.CE)("div",Et,[t[20]||(t[20]=(0,i.Lk)("h4",null,"Success!",-1)),(0,i.Lk)("div",null,"Schedule ID (Buy): "+(0,o.v_)(a.result.buy_schedule_id),1),(0,i.Lk)("div",null,"Schedule ID (Sell): "+(0,o.v_)(a.result.sell_schedule_id),1)])):((0,i.uX)(),(0,i.CE)("div",Xt,(0,o.v_)(a.result.error),1))])):(0,i.Q3)("",!0)])])}var Pt={name:"StartMagic",data(){return{selected:{intention:null,case:null,provider:null,catalog:null},loading:!1,result:null,fetchingSelections:!0}},computed:{canStartMagic(){return this.selected.intention&&this.selected.case&&this.selected.provider&&this.selected.catalog},missingSelectionsText(){const e=[];return this.selected.intention||e.push("intention"),this.selected.case||e.push("case"),this.selected.provider||e.push("provider"),this.selected.catalog||e.push("catalog"),"Please select: "+e.join(", ")}},methods:{async fetchSelections(){this.fetchingSelections=!0;const[e,t,s,n]=await Promise.all([fetch(`${L}/intentions`).then(e=>e.json()),fetch(`${L}/cases`).then(e=>e.json()),fetch(`${L}/providers`).then(e=>e.json()),fetch(`${L}/catalogs`).then(e=>e.json())]);this.selected.intention=(e.find?e.find(e=>e.selected):(e.intentions||[]).find(e=>e.selected))||null,this.selected.case=(t.cases||[]).find(e=>e.selected)||null,this.selected.provider=(s.providers||[]).find(e=>e.selected)||null,this.selected.catalog=(n.catalogs||[]).find(e=>e.selected)||null,this.fetchingSelections=!1},async runMagic(){this.loading=!0,this.result=null;try{const e=await fetch(`${L}/start-magic`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({intention_id:this.selected.intention?.id,case_id:this.selected.case?.id,provider_id:this.selected.provider?.id,catalog_id:this.selected.catalog?.id})}),t=await e.json();this.result=t}catch(e){this.result={status:"error",error:e.message}}this.loading=!1},holdPeriodString(e){return e?e%1440===0?e/1440+" days":e%60===0?e/60+" hours":e+" minutes":""}},mounted(){this.fetchSelections()}};const It=(0,d.A)(Pt,[["render",Ft],["__scopeId","data-v-ef967140"]]);var Ut=It;const $t=[{path:"/",redirect:"/dashboard"},{path:"/dashboard",component:S},{path:"/start",component:Ut},{path:"/servers",component:x},{path:"/providers",component:ne},{path:"/catalogs",component:He},{path:"/cases",component:at},{path:"/intentions",component:De},{path:"/pl",component:de}],At=(0,v.aE)({history:(0,v.Bt)(),routes:$t});var Tt=At;(0,n.Ef)(h).use(Tt).mount("#app")}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,o){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],i=e[d][1],o=e[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every(function(e){return s.O[e](n[l])})?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,o,a=n[0],r=n[1],l=n[2],c=0;if(a.some(function(t){return 0!==e[t]})){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(t&&t(n);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self["webpackChunkFinCompassPLUGIN"]=self["webpackChunkFinCompassPLUGIN"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[504],function(){return s(4467)});n=s.O(n)})();
//# sourceMappingURL=app.cd2d8be6.js.map